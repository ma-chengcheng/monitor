(function(t){function s(s){for(var a,i,r=s[0],c=s[1],l=s[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(s);while(p.length)p.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],a=!0,r=1;r<e.length;r++){var c=e[r];0!==o[c]&&(a=!1)}a&&(n.splice(s--,1),t=i(i.s=e[0]))}return t}var a={},o={app:0},n=[];function i(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=a,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)i.d(e,a,function(s){return t[s]}.bind(null,a));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var l=0;l<r.length;l++)s(r[l]);var d=c;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"034f":function(t,s,e){"use strict";e("85ec")},"2cfd":function(t,s,e){"use strict";e("e314")},"56d7":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var a=e("2b0e"),o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"page"}},[e("router-view")],1)])},n=[],i=(e("034f"),e("2877")),r={},c=Object(i["a"])(r,o,n,!1,null,null,null),l=c.exports,d=e("8c4f"),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"jumbotron"},[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-md-offset-1 col-md-3"},[t._m(1),e("div",{staticClass:"row text-center m-auto",staticStyle:{"padding-top":"100px"}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("p",[e("a",{staticClass:"btn btn-primary btn-lg btn-demo",on:{click:t.login}},[t._v("登陆")]),e("router-link",{staticClass:"btn btn-success btn-lg btn-learn",attrs:{to:"/register"}},[t._v("注册")])],1)])])])])])]),t._m(2)])},p=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"col-md-4 col-md-offset-2"},[a("img",{attrs:{src:e("cf05")}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("blockquote",{staticClass:"blockquote-reverse"},[e("p",[t._v("一套开源的集群监管系统。")]),e("footer",[e("cite",{attrs:{title:"八爪鱼"}},[t._v("八爪鱼")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row copyright"},[e("div",{staticClass:"col-md-12 text-center"},[e("p",[e("small",{staticClass:"block"},[t._v("© 2020 machengcheng 所有权")])])])])}],v=e("bc3a"),m=e.n(v),f="/api/v1",h=function(t,s){return m.a.post(f+"/login",{username:t,password:s})},_=function(t,s){return m.a.post(f+"/register",{username:t,password:s})},g={name:"Login",data:function(){return{username:"",password:""}},created:function(){var t=this.$cookies.get("token");console.log(t)},methods:{login:function(){var t=this;h(this.username,this.password).then((function(s){200===s.data.code&&(t.$cookies.set("token",s.data.data["token"]),t.$router.push("/console"))}))}}},C=g,w=(e("d6db"),Object(i["a"])(C,u,p,!1,null,null,null)),b=w.exports,x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"jumbotron"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 col-md-offset-4"},[e("div",{staticClass:"row text-center m-auto",staticStyle:{"padding-top":"100px"}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(s){s.target.composing||(t.username=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("p",[e("a",{staticClass:"btn btn-success btn-lg btn-learn",on:{click:t.register}},[t._v("注册")])])])])])])])])])},y=[],k={name:"Register",data:function(){return{username:"",password:""}},methods:{register:function(){_(this.username,this.password).then()}}},S=k,O=(e("2cfd"),Object(i["a"])(S,x,y,!1,null,null,null)),$=O.exports,P=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("Header",{attrs:{current_page:"console"}}),e("div",{staticClass:"overlay"}),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 text-left fh5co-heading fh5co-nav top-menu menu-1"},[e("ul",[e("li",{staticClass:"active"},[e("router-link",{attrs:{to:"/console"}},[t._v("资源概述")])],1)])]),e("div",{staticClass:"col-xs-offset-4 col-xs-4 text-right"},[e("RouterLink",{staticClass:"btn btn-success btn-sm btn-learn",attrs:{to:"/add_node"}},[t._v("添加主机")])],1)]),e("div",{staticClass:"row"},t._l(t.nodeInfoList,(function(s){return e("div",{key:s.ip,staticClass:"col-md-6"},[e("div",{staticClass:"fh5co-blog"},[e("div",{staticClass:"blog-text"},[e("h2",[t._v(t._s(s.host_name))]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6"},[e("span",{staticClass:"posted_on"},[t._v("IP "),e("b",[t._v(t._s(s.ip))])])]),e("div",{staticClass:"col-xs-6 text-right"},[s.status?e("span",{staticClass:"posted_on text-right",staticStyle:{color:"green"}},[t._v("运行中")]):e("span",{staticClass:"posted_on text-right",staticStyle:{color:"gray"}},[t._v("已停止")])])]),t._m(0,!0),e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-xs-4"},[e("h2",[t._v(t._s(s.cpu_percent)+"%")])]),e("div",{staticClass:"col-xs-4"},[e("h2",[t._v(t._s(s.memory_percent)+"%")])]),e("div",{staticClass:"col-xs-4"},[e("h2",[t._v(t._s(s.disk_percent)+"%")])])]),e("ul",{staticClass:"stuff text-right"},[e("router-link",{staticClass:"btn btn-sm btn-info",attrs:{to:{name:"Monitor",params:{ip:s.ip}}}},[t._v(" 详情 ")]),e("a",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){return t.deleteNode(s.ip)}}},[t._v("删除")])],1)])])])})),0)])],1)},j=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4"},[e("h5",[t._v("cpu使用率")])]),e("div",{staticClass:"col-xs-4"},[e("h5",[t._v("内存使用率")])]),e("div",{staticClass:"col-xs-4"},[e("h5",[t._v("磁盘使用率")])])])}],N=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("nav",{staticClass:"fh5co-nav",attrs:{role:"navigation"}},[e("div",{staticClass:"top-menu"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-2"},[e("div",{attrs:{id:"fh5co-logo"}},[e("router-link",{attrs:{to:"/console"}},[t._v("八爪鱼")])],1)]),e("div",{staticClass:"col-xs-10 text-right menu-1"},[e("ul",[e("li",[e("router-link",{attrs:{to:"/console"}},[t._v(t._s(t.username))])],1)])])])])])])},E=[],I=e("1232"),H={name:"Header",data:function(){return{username:""}},props:["current_page"],created:function(){var t=this.$cookies.get("token");t?(t=Object(I["a"])(t),this.username=t.username):this.$router.push("/")}},D=H,M=Object(i["a"])(D,N,E,!1,null,null,null),L=M.exports,W="/api/v1",q=function(t){return m.a.post(W+"/delete_node",{ip:t})},A=function(t,s,e,a){return m.a.post(W+"/add_node",{ip:t,host_name:s,ssh_username:e,ssh_password:a})},J={name:"Console",components:{Header:L},data:function(){return{nodeInfoList:[]}},created:function(){this.initWebSocket()},destroyed:function(){this.websock.close()},methods:{initWebSocket:function(){var t="ws://master_master_1:8082/api/v1/ws/query";this.websock=new WebSocket(t),this.websock.onmessage=this.webSocketOnMessage,this.websock.onerror=this.webSocketOnError},webSocketOnError:function(){this.initWebSocket()},webSocketOnMessage:function(t){var s=JSON.parse(t.data);this.nodeInfoList=s["node_info_list"]},deleteNode:function(t){q(t).then((function(t){200!==t.data.code&&console.log(t.data.msg)})).catch((function(t){console.log(t)}))}}},U=J,R=Object(i["a"])(U,P,j,!1,null,null,null),T=R.exports,B=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Header",{attrs:{current_page:"add_server"}}),e("header",{staticClass:"fh5co-cover js-fullheight",attrs:{id:"fh5co-header",role:"banner"}},[e("div",{staticClass:"overlay"}),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-4 text-left fh5co-heading fh5co-nav top-menu menu-1"},[e("ul",[e("li",[e("router-link",{attrs:{to:"/console"}},[t._v("资源概述")])],1)])])]),e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"row text-center"},[e("div",{staticClass:"col-md-4 col-md-offset-4"},[e("div",{staticClass:" form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.host_name,expression:"host_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Host Name"},domProps:{value:t.host_name},on:{input:function(s){s.target.composing||(t.host_name=s.target.value)}}})]),e("div",{staticClass:" form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ip,expression:"ip"}],staticClass:"form-control",attrs:{type:"text",placeholder:"IP"},domProps:{value:t.ip},on:{input:function(s){s.target.composing||(t.ip=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ssh_username,expression:"ssh_username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"SSH Username"},domProps:{value:t.ssh_username},on:{input:function(s){s.target.composing||(t.ssh_username=s.target.value)}}})]),e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ssh_password,expression:"ssh_password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"SSH Password"},domProps:{value:t.ssh_password},on:{input:function(s){s.target.composing||(t.ssh_password=s.target.value)}}})]),e("p",[e("a",{staticClass:"btn btn-primary btn-lg btn-demo",on:{click:t.addNode}},[t._v("添加")])])])])])])])],1)},G=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-md-8 col-md-offset-2 text-center fh5co-heading"},[e("h2",[t._v("添加主机")])])}],z={name:"AddServer",components:{Header:L},data:function(){return{ip:"",host_name:"",ssh_username:"",ssh_password:""}},methods:{addNode:function(){var t=this;A(this.ip,this.host_name,this.ssh_username,this.ssh_password).then((function(s){200===s.data.code?(t.$cookies.set("token",s.data.data["token"]),t.$router.push("/console")):console.log(s.data.msg)})).catch((function(t){console.log(t)}))}}},F=z,K=Object(i["a"])(F,B,G,!1,null,null,null),Q=K.exports,V=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("Header",{attrs:{current_page:"monitor"}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-3 col-md-offset-1"},[e("div",{staticClass:"fh5co-blog"},[e("div",{staticClass:"blog-text"},[e("h4",[t._v("详情")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 left"},[t._v("IP")]),e("div",{staticClass:"col-xs-6 text-right"},[t._v(t._s(t.nodeInfo.ip)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 left"},[t._v("主机名")]),e("div",{staticClass:"col-xs-6 text-right"},[t._v(t._s(t.nodeInfo.host_name)+" ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 left"},[t._v("用户名")]),e("div",{staticClass:"col-xs-6 text-right"},[t._v(t._s(t.nodeInfo.ssh_username))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 left"},[t._v("密码")]),e("div",{staticClass:"col-xs-6 text-right"},[t._v(t._s(t.nodeInfo.ssh_password))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xs-6 left"},[t._v("状态")]),t.nodeInfo.status?e("div",{staticClass:"col-xs-6 posted_on text-right",staticStyle:{color:"green"}},[t._v("运行中")]):e("div",{staticClass:"col-xs-6 posted_on text-right",staticStyle:{color:"gray"}},[t._v("已停止")])])])])]),t._m(0)])],1)},X=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col-xs-7"},[e("div",{staticClass:"fh5co-blog"},[e("div",{staticClass:"blog-text"},[e("h3",[t._v("CPU使用率")]),e("div",{staticClass:"row"},[e("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"cpu"}})]),e("h3",[t._v("内存使用率")]),e("div",{staticClass:"row"},[e("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"mem"}})]),e("h3",[t._v("磁盘使用率")]),e("div",{staticClass:"row"},[e("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"disk"}})])])])])}],Y={name:"Monitor",components:{Header:L},data:function(){return{nodeInfo:"",chartData:{cpu:[0,0,0,0,0,0,0],disk:[0,0,0,0,0,0,0],mem:[0,0,0,0,0,0,0]},ws:""}},created:function(){},methods:{plot:function(t){var s=this.$echarts.init(document.getElementById(t)),e={xAxis:{type:"category",data:["60秒","50","40","30","20","10","0"],boundaryGap:!1},yAxis:{type:"value",splitNumber:11,in:0,max:100,splitLine:{show:!1}},series:[{data:this.chartData[t],type:"line",smooth:!0}]};s.setOption(e)}},mounted:function(){var t=this,s="ws://master_master_1:8082/api/v1/ws/query";this.ws=new WebSocket(s),this.ws.onmessage=function(s){var e=JSON.parse(s.data);for(var a in e["node_info_list"])e["node_info_list"][a]["ip"]===t.$route.params.ip&&(t.nodeInfo=e["node_info_list"][a],t.chartData["cpu"].shift(),t.chartData["cpu"].push(e["node_info_list"][a]["cpu_percent"]),t.chartData["mem"].shift(),t.chartData["mem"].push(e["node_info_list"][a]["memory_percent"]),t.chartData["disk"].shift(),t.chartData["disk"].push(e["node_info_list"][a]["disk_percent"]),t.plot("mem"),t.plot("cpu"),t.plot("disk"))},this.plot("mem"),this.plot("cpu"),this.plot("disk")},beforeDestroy:function(){this.ws.close()}},Z=Y,tt=Object(i["a"])(Z,V,X,!1,null,null,null),st=tt.exports;a["a"].use(d["a"]);var et=[{path:"/",name:"Login",component:b},{path:"/register",name:"Register",component:$},{path:"/console",name:"Console",component:T},{path:"/add_node",name:"AddNode",component:Q},{path:"/monitor/:ip",name:"Monitor",component:st}],at=new d["a"]({routes:et}),ot=at,nt=e("2f62");a["a"].use(nt["a"]);var it=new nt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),rt=e("2b27"),ct=e.n(rt),lt=e("4d28"),dt=e.n(lt);a["a"].config.productionTip=!1,a["a"].use(ct.a),a["a"].prototype.$echarts=dt.a,new a["a"]({router:ot,store:it,render:function(t){return t(l)}}).$mount("#app")},"85ec":function(t,s,e){},cf05:function(t,s,e){t.exports=e.p+"img/logo.d13e4316.png"},d6db:function(t,s,e){"use strict";e("e67a")},e314:function(t,s,e){},e67a:function(t,s,e){}});
//# sourceMappingURL=app.ae1b8967.js.map